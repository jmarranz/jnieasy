<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_02) on Mon Mar 31 21:30:12 CEST 2008 -->
<TITLE>
NativeEnhancer (JNIEasy v1.2.1, doc. version v1.0)
</TITLE>

<META NAME="keywords" CONTENT="com.innowhere.jnieasy.core.enh.NativeEnhancer interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="NativeEnhancer (JNIEasy v1.2.1, doc. version v1.0)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/NativeEnhancer.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancerClassLoader.html" title="interface in com.innowhere.jnieasy.core.enh"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/innowhere/jnieasy/core/enh/NativeEnhancer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="NativeEnhancer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.innowhere.jnieasy.core.enh</FONT>
<BR>
Interface NativeEnhancer</H2>
<HR>
<DL>
<DT><PRE>public interface <B>NativeEnhancer</B></DL>
</PRE>

<P>
The <code>NativeEnhancer</code> is the interface used to perform enhancement tasks with 
 user defined native capable classes.
 <p>
 An enhanced class (on filesystem or enhanced on load) contains the complementary
 native information needed by the framework (native memory layout etc) 
 to create and manage native instances.
 <p>
 If an enhanced class is used first time and loaded as usual, the class register 
 itself into the framework.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Jose M. Arranz Santamaria</DD>
<DT><B>See Also:</B><DD><A HREF="../../../../../com/innowhere/jnieasy/core/JNIEasy.html#getEnhancer()"><CODE>JNIEasy.getEnhancer()</CODE></A></DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.ClassLoader</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancer.html#enableOnLoad(java.lang.String[], java.lang.String[])">enableOnLoad</A></B>(java.lang.String[]&nbsp;includeImports,
             java.lang.String[]&nbsp;excludeImports)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enables the runtime enhancement of user defined native capable classes using the default ClassLoader
 of the framework as parent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.ClassLoader</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancer.html#enableOnLoad(java.lang.String[], java.lang.String[], java.lang.ClassLoader)">enableOnLoad</A></B>(java.lang.String[]&nbsp;includeImports,
             java.lang.String[]&nbsp;excludeImports,
             java.lang.ClassLoader&nbsp;parent)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enables the runtime enhancement of user defined native capable classes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancer.html#enhance(java.net.URL, java.lang.String)">enhance</A></B>(java.net.URL&nbsp;filePath,
        java.lang.String&nbsp;outputDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enhances the user defined native capable classes specified in the XML file located 
 with the <code>filePath</code> parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../com/innowhere/jnieasy/core/JNIEasy.html" title="class in com.innowhere.jnieasy.core">JNIEasy</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancer.html#getJNIEasy()">getJNIEasy</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the JNIEasy parent object.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getJNIEasy()"><!-- --></A><H3>
getJNIEasy</H3>
<PRE>
<A HREF="../../../../../com/innowhere/jnieasy/core/JNIEasy.html" title="class in com.innowhere.jnieasy.core">JNIEasy</A> <B>getJNIEasy</B>()</PRE>
<DL>
<DD>Returns the JNIEasy parent object.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="enableOnLoad(java.lang.String[], java.lang.String[], java.lang.ClassLoader)"><!-- --></A><H3>
enableOnLoad</H3>
<PRE>
java.lang.ClassLoader <B>enableOnLoad</B>(java.lang.String[]&nbsp;includeImports,
                                   java.lang.String[]&nbsp;excludeImports,
                                   java.lang.ClassLoader&nbsp;parent)</PRE>
<DL>
<DD>Enables the runtime enhancement of user defined native capable classes. 

 A new <code>ClassLoader</code> is created, registered with 
 com.innowhere.jnieasy.core.typedec.NativeTypeManager#setClassLoader(ClassLoader)
 and returned, 
 this ClassLoader will be the default of the framework, and 
 <A HREF="../../../../../com/innowhere/jnieasy/core/typedec/NativeTypeManager.html#getClassLoader()"><CODE>NativeTypeManager.getClassLoader()</CODE></A> will return it.
 <p>
 The new ClassLoader is an <i>enhancer</i> ClassLoader: 
 if the class to load is a user defined native capable it will be enhanced
 in memory previously to register in the JVM with <code>ClassLoader.defineClass()</code>,
 if the class is already 
 enhanced nothing will be done and will be registered normally. 
 This way, is not necessary a previous enhancement step, because is performed 
 on runtime automatically when the class is first time used.
 <p>
 To enhance a user native capable class on runtime, the ClassLoader needs 
 to locate the XML native information of the class, this archive is located using
 <code>ClassLoader.getResource(String)</code> (implies it must be in the classpath of the
 parent ClassLoader) and must follow this name convention:
  <blockquote>
  <i>SimpleClassName</i>.jnieasy.enh.xml
  </blockquote>
 For instance: if class name is <code>mypkg1.mypkg2.MyClass</code> , <code>getResource()</code> is 
 invoked with the parameter: <code>mypkg1/mypkg2/MyClass.jnieasy.enh.xml</code>, if found and valid the class 
 is enhanced.
 The <code>parent</code> parameter specifies the parent ClassLoader, the enhancer ClassLoader does not 
 follow a pure delegation model:
 <p> 
 <ol>
 <li>Delegates to parent if class name match with an exclude import of 
 the list specified with <code>excludeImports</code> parameter. 
 <li>Is loaded by self if class name match with an include import of 
 the list specified with <code>includeImports</code> parameter
  or is an internal native wrapper class.
 <li>Otherwise, delegates to parent.
 </ol>
 <p>
 Specifying what load by self first and what delegate after, is possible enhancing on runtime and 
 running in any type of "class loading managed environment" because the enhancer 
 ClassLoader does not need to be the root loader.

 But when using runtime enhancement, is necessary to load with the enhancer ClassLoader
 all classes that manipulate native classes, because if a normal class uses a native capable  
 class and this has not been loaded before, then it will be loaded with the ClassLoader of the normal class, 
 but if a native capable class not enhanced is loaded with the parent ClassLoader, then it never will be enhanced
 and never will be native.

 Achieve that is not very difficult: enable the enhancer before executing any native related code, and 
 load the starting class explicitly with the enhancer ClassLoader.
 <p>
 For instance:
 <blockquote><pre>
 String[] included = new String[] { "myapp.nativemgrcode.*" };
 ClassLoader enhancerCL = enhancer.enableOnLoad(included,null,myParentClassLoader);
 Class clsStart = Class.forName("myapp.nativemgrcode.Start",true, enhancerCL); 
 // Start class implements StartInterface
 StartInterface start = (StartInterface)clsStart.newInstance(); 
 start.run();
 </pre></blockquote>
 
 The <code>includeImports</code> and <code>excludeImports</code> parameters are 
 String arrays with the "import formatted" criteria to include or exclude 
 (delegate) the class loading. The import format is explained in 
 <A HREF="../../../../../com/innowhere/jnieasy/core/typedec/NativeTypeManager.html#setDefaultImports(java.lang.String[])"><CODE>NativeTypeManager.setDefaultImports(String[])</CODE></A>. 
 <p> 

 The enhancer ClassLoader implements the interface <A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancerClassLoader.html" title="interface in com.innowhere.jnieasy.core.enh"><CODE>NativeEnhancerClassLoader</CODE></A> to 
 identification purposes.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>includeImports</CODE> - the included list of classes using Java import syntax<DD><CODE>excludeImports</CODE> - the excluded list of classes using Java import syntax. Can be null<DD><CODE>parent</CODE> - the parent ClassLoader
<DT><B>Returns:</B><DD>the new enhancer ClassLoader<DT><B>See Also:</B><DD><A HREF="../../../../../com/innowhere/jnieasy/core/typedec/NativeTypeManager.html#getClassLoader()"><CODE>NativeTypeManager.getClassLoader()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="enableOnLoad(java.lang.String[], java.lang.String[])"><!-- --></A><H3>
enableOnLoad</H3>
<PRE>
java.lang.ClassLoader <B>enableOnLoad</B>(java.lang.String[]&nbsp;includeImports,
                                   java.lang.String[]&nbsp;excludeImports)</PRE>
<DL>
<DD>Enables the runtime enhancement of user defined native capable classes using the default ClassLoader
 of the framework as parent.
 
 Current implementation is:
 <blockquote><pre>
 ClassLoader parent = getJNIEasy().getTypeManager().getClassLoader();
 return enableOnLoad(includeImports,excludeImports,parent);     
 </pre></blockquote>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>includeImports</CODE> - the included list of classes using Java import syntax<DD><CODE>excludeImports</CODE> - the excluded list of classes using Java import syntax, can be null
<DT><B>Returns:</B><DD>the new enhancer ClassLoader<DT><B>See Also:</B><DD><A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancer.html#enableOnLoad(java.lang.String[], java.lang.String[], java.lang.ClassLoader)"><CODE>enableOnLoad(String[],String[],ClassLoader)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="enhance(java.net.URL, java.lang.String)"><!-- --></A><H3>
enhance</H3>
<PRE>
void <B>enhance</B>(java.net.URL&nbsp;filePath,
             java.lang.String&nbsp;outputDir)</PRE>
<DL>
<DD>Enhances the user defined native capable classes specified in the XML file located 
 with the <code>filePath</code> parameter.

 The XML file is a XML enhancement descriptor. 

 The resulting classes will be saved in the directory specified with the 
 <code>outputDir</code> parameter, using the equivalent relative directory tree 
 of the package of each class to save.

 For instance, if MyClass.class is enhanced and represents mypkg1.mypkg2.MyClass, then
 the enhanced .class is saved as file: 
 <code>outputDir + "/" + "mypkg1/mypkg2/MyClass.class"</code>

 The default ClassLoader as returned by <A HREF="../../../../../com/innowhere/jnieasy/core/typedec/NativeTypeManager.html#getClassLoader()"><CODE>NativeTypeManager.getClassLoader()</CODE></A>
 will be used to locate class files, is not necessary an enhancer ClassLoader. 

 Enhanced class files do not need XML descriptors anymore to create native objects.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>filePath</CODE> - the location of XML file listing the classes to enhance<DD><CODE>outputDir</CODE> - the directory to save enhanced files</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/NativeEnhancer.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../com/innowhere/jnieasy/core/enh/NativeEnhancerClassLoader.html" title="interface in com.innowhere.jnieasy.core.enh"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/innowhere/jnieasy/core/enh/NativeEnhancer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="NativeEnhancer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

                 
                Copyright © 2006 Innowhere Software Services S.L. All Rights Reserved.
                
            
</BODY>
</HTML>
